[toc]

# 账户管理

##  运行模式

* 在Linux中存在一个进程：init(initialize 初始化)，进程 id 是 1

  * 查看进程：`#ps -ef|grep init` 
    ![image-20201210195514967](C:\Users\傻兮兮乎乎\AppData\Roaming\Typora\typora-user-images\image-20201210195514967.png)

  * 该进程存在一个对应的配置文件：inittab(系统运行级别配置文件，位置 `/etc/inittab`)
    ![image-20201210195825338](C:\Users\傻兮兮乎乎\AppData\Roaming\Typora\typora-user-images\image-20201210195825338.png)

    根据上面的描述，可以得知，存在7种运行级别/模式

    > 0 ——表示关机级别（不要将默认的运行级别设置成这个值
    >
    > 1——单用户模式
    >
    > 2——多用户模式，不带NFS（network file syetem)
    >
    > 3——多用户模式，完全的多用户模式（不带桌面的，纯命令模式）
    >
    > 4——没有被使用的模式（被保留的模式）
    >
    > 5——X11,完整的图形化界面模式
    >
    > 6——表示重启级别（不要将默认的运行级别设置成这个值）

* 与该级别相关的几个命令（临时切换，重启后又恢复）
  这些命令其实都是调用的init进程，将数字（运行级别）传递给进程，进程去读配置文件执行对应的操作。

  > `#init 0` 表示关机
  >
  > `#init 3` 表示切换到不带桌面的模式
  >
  > `#init 5` 切换到图形界面
  >
  > `#init 6` 重启电脑

* 设置模式永久为命令行模式

  * 将 `/etc/inittab` 文件中的 `initdefault` 值设置成3，然后重启操作系统

## 用户管理

> 用户帐号的添加，删除，修改以及用户密码的管理
>
> 用户组的管理

> `/etc/passwd` 存储**用户**的关键信息
>
> `/etc/group` 存储**用户组**的关键信息
>
> `/etc/shadow` 存储**用户的密码**信息

### 添加用户

> 语法：`#useradd 选项 用户名` 
>
> 选项： `-g` 表示指定用户的用户主组，选项的值可以是用户组的id，也可以是组名
>
> ​			`-G` 表示指定用户的用户附加组，选项的值可以是用户组的id，也可以是组名
>
> ​			`-u` 表示uid,用户的id（用户的标识符），系统默认会从500之后按顺序分配uid，如果不想使用系统分配的，可以通过该选项自定义
>
> 注意：
>
> 1. 不添加选项的时候，会创建同名的家目录，创建同名的用户组
> 2. 查看用户的主组可以查看passwd文件，查看附加组可以查看group文件

* 验证添加是否成功：
  *  `/etc/passwd` 的最后一行，查看是否用户信息
  * 是否存在 `家目录` ，创建好用户之后随之产生一个同名家目录

* `passwd` 文件
  ![image-20201211081848174](C:\Users\傻兮兮乎乎\AppData\Roaming\Typora\typora-user-images\image-20201211081848174.png)

  > 用户名：密码：用户id：用户组id：注释：家目录：解释器shell
  >
  >  
  >
  > 用户名：创建新用户名称，后期登入的时候需要输入
  >
  > 密码：此密码位置一般情况都是“x"，表示密码的占位
  >
  > 用户id：用户的识别符
  >
  > 用户组id：该用户所属的主组id
  >
  > 注释：解释该用户是做什么用的
  >
  > 家目录：用户登录进入系统之后默认的位置
  >
  > 解释器shell：等待用户进入系统之后，用户输入指令之后，该解释器会收集用户输入的指令，传递给内核处理

### 修改用户

> 语法：`#usermod 选项 用户名`
>
> 选项：  `-g` 表示指定用户的用户主组，选项的值可以是用户组的id，也可以是组名
>
> ​			`-G` 表示指定用户的用户附加组，选项的值可以是用户组的id，也可以是组名
>
> ​			`-u` 表示uid,用户的id（用户的标识符），系统默认会从500之后按顺序分配，如果不想使用系统分配的，可以通过该选项自定义
>
> ​			`-l` 修改用户名

* 例子
  * `#usermod -l 新的用户名 旧的用户名`
  * `#usermod -g 500 -G 501 zhangsan`

### 设置密码

> 语法：`#passwd 用户名`

* Linux不允许没有密码的用户登入到系统，因此前面创建的用户目前都处于锁定状态，需要设置密码之后才能登入计算机
* 设置密码后 `shadow`文件中可以查看是否有密码

### 删除用户

> 语法：`#userdel 选项 用户名`
>
> 选项：`-r` 表示删除用户的同时，删除其家目录

* 已经登入的用户删除的时候提示删除失败，但是没有登入的用户可以正常删除
  * kill对应用户的全部删除
    ![image-20201211084323415](C:\Users\傻兮兮乎乎\AppData\Roaming\Typora\typora-user-images\image-20201211084323415.png)
  * 换个用户，再删除所需要删除的用户

## 用户组管理

> 每个用户都有一个用户组，系统可以堆一个用户组中的所有用户进行集中管理，不同Linux系统对用户组的规定有所不同，如Linux下的用户属于与它同名的用户组，这个用户组在创建用户时同时创建。
>
> 用户组的管理涉及用户组的添加，删除和修改。组的增加，删除和修改实际上就是对 `/etc/group` 文件的更新

* `/etc/group` 文件
  ![image-20201211084806216](C:\Users\傻兮兮乎乎\AppData\Roaming\Typora\typora-user-images\image-20201211084806216.png)

  > 用户组名：密码：用户组id：组内用户名
  >
  > 密码：X表示占位符，虽然用户组可以设置密码，但是绝大部分的情况下不设置密码
  >
  > 组内用户名：表示附加组是该组的用户名称

### 用户组添加

> 语法：`#groupadd 选项 用户组名` 
>
> 选项：`-g` 类似用户添加里的 `-u` ，表示选择自己设置一个自定义的用户组id数字，如果自己不指定，则默认从500之后递增

### 用户组的编辑

> 语法：`#groupmod 选项 用户组名`
>
> 选项：`-g` 类似用户添加里的 `-u` ，表示选择自己设置一个自定义的用户组id数字
>
> ​			`-n` 类似于用户修改 `-l` ，表示设置新的用户组名称

### 用户组删除

> 语法：`#groupdel 用户组名`  
>
> 注意：
>
> ​	如果需要删除一个组，但是这个组是某个用户的主组时，则不允许删除，如果确实需要删除，则先从组内移除所有用户

# 网络设置

* 网卡配置文件位置： `/etc/sysconfig/network-scripts`
  ![image-20201211091009852](C:\Users\傻兮兮乎乎\AppData\Roaming\Typora\typora-user-images\image-20201211091009852.png)

  > 在此目录中网卡的配置文件命名格式：`ifcfg-网卡名称`

  ![image-20201211090805728](C:\Users\傻兮兮乎乎\AppData\Roaming\Typora\typora-user-images\image-20201211090805728.png)

  > ONBOOT：是否开机启动
  >
  > BOOTPROTO：IP地址分配方式，DHCP表示动态主机分配协议
  >
  > HWADDP：硬件地址，MAC地址

* 重启网卡

  * `#service network restart`
  * `#/etc/init.d/network restart` (`/etc/init.d`这个目录中放着对服务的快捷方式）

* 软链接（如果文件的目录层次很深，此时可以在浅的目录中创建一个快捷方式，方便查找）

  * `#ln -s 原始文件的路径 快捷方式的路径`

  * `ls -l` 
    ![image-20201211091946496](C:\Users\傻兮兮乎乎\AppData\Roaming\Typora\typora-user-images\image-20201211091946496.png)

    > 文件类型位置 `i` 表示其类型为link(连接类型)，后面的 `->` 指向的是原始文件路径

* 重启单个网卡
  * 停止某个网卡：`#ifdown 网卡名`
  * 开启某个网卡：`#ifup 网卡名` 

# shh服务

> shh(安全外壳协议)，该协议有2个常用的作用：远程连接协议，远程文件传输协议。
>
> 协议使用端口号：默认是22

* 端口号可以修改，如需要修改，则需要修改shh服务的配置文件 `#/etc/ssh/shh_config`
  ![image-20201211095358645](C:\Users\傻兮兮乎乎\AppData\Roaming\Typora\typora-user-images\image-20201211095358645.png)
  * 端口范围是从0-65535
  * 不能使用别的服务已经占用的端口

* 服务重启/停止/重启
  * `#service sshd start/stop/restart`
  * `#/etc/init.d/sshd start/stop/restart`

## 远程终端(putty)

> 终端工具主要帮助运维人员连接远程的服务器。

1. 获取服务器IP地址，可以通过 `ifconfig` 命令进行查看，然后顺手测试IP的连接相通性 `ping`
2. 打开 putty，输入相关信息即可

## shh服务文件传输（可视化：filezilla)

1. 选择”文件“ —— ”站点管理器“
2. 连接
3. 从本地windows上传文件到Linux中（拖拽/右键本地需要上传的文件），点击”上传“即可
4. 下载Linux文件到本地（拖拽/在右侧窗口需要下载的文件，右键，点击”下载“

## shh服务文件传输（命令行：pscp)

> pscp.exe 必须通过cmd命令行打开，为了使用方便可以将其放到环境变量目录中，如果不清楚哪些路径是环境变量路径，只需要将其放到 `C：/windows`即可

* 在windows的cmd中操作
  * 下载到win:`pscp 选项 用户名@linux主机地址：资源路径 Windows本地地址路径`
    * 选项：`-r` 递归文件，一般用于文件夹
    * 路径注意点：路径中含有空格时，用 `""`将路径框起来
  * 上传到Linux：`pscp 选项 资源路径 用户名@Linux主机地址：远程路径 ` 
  * 停止传输：`CTRL + c`