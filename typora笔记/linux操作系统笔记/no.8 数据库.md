[toc]

# 数据库

## 概念

* 如果一个项目是动态的（内容会变化的，网页后缀`.jsp` `.php` `.shtml` 内容的话，则数据库是必不可少的一个环节

* MySQL是一个关系型数据库管理系统，其与PHP是黄金搭档

## 软件在Linux下安装

### 源码包

1. 将软件包传递到服务器上（软件从window传到Linux中）

2. 在Linux中，用`#tar -zxvf *.tar.gz`（常用） `#tar -jxvf *.tar.bz2`解压

   > `-z`:通过gzip指令处理文件
   >
   > `-x`：从文件中还原文件
   >
   > `-v`：显示操作过程
   >
   > `-f`：指定一个文件
   >
   > `-j`： 支持bzip2解压文件

3. 安装软件：配置(config/configure/bootstrap) -> 编译(make/bootstrapd) -> 安装(make install/bootstrapd install)

   > 配置：只要是指定软件的安装目录，需要的依赖在什么地方，指定不需要可选依赖，配置文件的路径，通用数据存储位置等等
   > 指定安装的路径：`--prefix=路径`
   >
   > 需要依赖的路径：`--with-PACKAGE 名=包所在的路径`
   >
   > 不需要依赖：`--without-PACHAGE 名`

   > 编译和安装：可以一起实施（make & make install)

### 二进制包（rpm)

> 优点：包管理系统简单，只需要几个命令就可以实现包的安装，升级，查询和卸载
>
> 缺点：经过编译，不再可以看到源代码

`#rpm -qa|grep 关键词`

`#rpm -e 关键词`

`#rpm -ivh 完整名称`

`#rpm -Uvh 完成名称`

**`#rpm -qf 文件路径`**

* `lynx`一款纯命令行的浏览器 ， `#lynx --dump 域名` 登入网址

### yum安装

> 优点：安装简单，快捷
>
> 缺点：完全丧失了自定义性

`#yum list`							列出当前已经装的和可以装的软件（全部）

`#yum search 名`					搜索指定的关键词的包

`#yum [y] install 包名`				安装指定的包

`#yum [y] update [包名]`			更新指定的包，不指定包则更新全部软件

`#yum [y] remove 包名`				卸载指定包

## mysql的基本操作

* 数据库	数据表	记录（行）	字段（列）

* 库操作

  | 命名                   | 作用                        |
  | ---------------------- | --------------------------- |
  | show databases；       | 显示当前MySQL中全部的数据库 |
  | create database 库名； | 创建数据库                  |
  | drop database 库名；   | 删除数据库                  |
  | use 库名；             | 切换数据库                  |

* 表操作

  | 命令                                                         | 作用                                                         |
  | ------------------------------------------------------------ | ------------------------------------------------------------ |
  | show tables;                                                 | 显示当前数据库中全部的数据表                                 |
  | create table 表名称<br />(<br />列名称1 数据类型 [not null auto_increment]，<br />列名称2 数据类型，<br />列名称3 数据类型，<br />……<br />primary key(关键字段名)<br />)； | 创建数据表<br />数据类型：int char(定长字符) varchar(不定长字符) |
  | desc 表名称；                                                | 查看表结构                                                   |
  | drop table [if exists] 表名称；                              | 删除表                                                       |

* 记录操作

  | 命令                                                         | 作用                                                 |
  | ------------------------------------------------------------ | ---------------------------------------------------- |
  | insert into 表名称 values (值1，值2，……)；                   | 增加记录                                             |
  | insert into 表名称 （列1，列2，……） values (‘值1’，‘值2’，……)； | 增加记录（常用）<br />密码值要加密后输入（站长工具） |
  | select 列名称1，列名称2…… from 表名称 where 条件；           | 查询记录<br />条件用来限制行的                       |
  | select * from 表名称 where 条件；                            | 查询记录（全部）                                     |
  | updata 表名字 set 列名称1 = 新值1，列名称2 = 新值2…… where 列名称 = 某值； | 更新记录                                             |
  | delete from 表名称 where 列名称 = 值                         | 删除记录                                             |

* 备份

  | 命令                                                         | 作用                    |
  | ------------------------------------------------------------ | ----------------------- |
  | #mysqldump -uroot -p123456 -A > 备份文件路径                 | 全量备份（数据+结构）   |
  | #mysqldump -uroot -p（密码）库名 > 备份文件路径              | 指定库备份（数据+结构） |
  | #mysqldump -uroot -p（密码） --databases db1 db2 > 备份文件路径 | 多个库备份（数据+结构） |

* 还原（导入）

  | 命令                                            | 作用            |
  | ----------------------------------------------- | --------------- |
  | mysql> source 备份文件路径                      | 还原全部数据库  |
  | #mysql -uroot -p(密码) < 备份文件路径           | 系统命令行      |
  | mysql> use 库名<br />mysql> source 备份文件路径 | 还原单个数据库  |
  | #mysql -uroot -p(密码) 库名 < 备份文件路径      | 系统命令行      |
  | mysql> set names utf8;                          | mysql连接字符集 |

  

# 项目上线流程