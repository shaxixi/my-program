[toc]

# vi和vim

* vi		vi 和 vim 都是Linux中的编辑器，不同的是，vim比较高级，可以视为 vi 的升级版本，vi 适用于文本编辑，但是vim 更适用于coding（写代码）
* vim    光标的移动，模式切换，删除，查找，替换，复制，粘贴，撤销命令的使用。

# vim的三种模式

* vim的打开文件的方式

  * > 语法：`#vim 文件路径`
    >
    > 含义：打开指定的文件

  * > 语法：`#vim +数字 文件路径`
    >
    > 含义：打开指定的文件，并且将光标移动到指定行

  * > 语法：`#vim +/关键词 文件的路径`
    >
    > 含义：打开指定的文件，并且高亮显示关键词

  * > 语法：`#vim 文件路径1 文件路径2 文件路径3 ……`
    >
    > 含义：同时打开多个文件

* vim的退出文件的方式
  
  * `:q` + `Enter`
  
* 模式间的切换：

  ![image-20201102055945742](C:\Users\傻兮兮乎乎\AppData\Roaming\Typora\typora-user-images\image-20201102055945742.png)

## 命令模式

* 光标移动
  * 行首：`^`
  * 行尾：`$`
  * 首行：`gg`
  * 末行：`G`
  * 向上翻屏：`ctrl` + `b`
  * 向下翻屏：`ctrl` + `f`
  * 指定行：`数字` + `G`
  * 以当前光标为准向上/向下移动n行：`数字` + `^|` / `数字` + `|v`
  * 以当前光标为准向左/向右移动n行：`数字` + `<--` / `数字` + `-->`

* 复制操作
  * 复制光标所在行：`yy`			粘贴：`p键`
  * 以光标所在行为准（包含当前行，向下复制指定的行数）：`数字` + `yy`           粘贴：`p键`
  * 可视化复制：
    * `ctrl` + `v` 
    * `^|` `|v` `<--` `-->` 方向键选中需要复制的块区
    * `yy键`进行复制
    * 粘贴：`p键`
* 剪切/删除
  * 剪切/删除光标所在行（删除之后下一行上移）：`dd`
  * 以光标所在行为准（包含当前行，向下删除/剪切指定的行数）：`数字` + `dd`        
  * 剪切/删除光标所在行（删除之后下一行不上移）：`D`

* 撤销/恢复
  * `:u` / `u` : 撤销
  * `ctrl` + `r` : 恢复（取消）之前的撤销操作

## 末行模式

* 进入方式（由命令模式进入）
  * 按下`:` 
  * 按下`/` ，表示查找

* 退出方式
  * 按下`esc`
  * 连按两次 `esc`
  * 删除末行全部输入字符

* 保存操作（write）
  * 保存文件： `:w` 
  * 另存为： `:w 路径` 
* 退出文件（quit）
  * 直接退出：`:q`
  * 保存并退出：
    * `:wq` 如果没修改过文件，则文件修改时间**仍会**被更新
    * `:x` 如果没修改过文件，则文件修改时间**不会**被更新
  * 强制 (!) 退出（刚做的修改操作不做保存）：`:q!`

* 调用外部命令 `:!外部命令`
* 搜索/查找
  * `/关键词`
  * 在搜索过程中切换上/下一个结果： `N/n` (next)
  * 取消高亮：`:nohl` (no highlight)

* 替换

  > `%` 表示整个文件
  >
  > `g` 表示全局（global)

  * 替换光标**所在行**的**第一处**符合条件的内容：`:s/搜索的关键词/新的内容` 
  * 替换光标**所在行**的**全部**符合条件的内容：`:s/搜索的关键词/新的内容/g` 
  * 替换光标**所在文档**中**每一行**的**第一处**符合条件的内容：`:%s/搜索的关键词/新的内容` 
  * 替换光标**所在文档**中的**全部**符合条件的内容：`:%s/搜索的关键词/新的内容/g` 

* 显示行号
  * `:set nu` (number)
  * 取消显示：`:set nonu` 

* 使用vim同时打开多个文件，在末行模式下进行切换文件

  * 查看当前已经打开的文件名称：`:files``

    > ``%a` 表示当前正在打开的文件
    >
    > `#` 表示上一个打开的文件

  * 指定切换文件的名称：`:open group`

  * 切换上一个文件/下一个文件

    * 下一个文件：`:bn`
    * 上一个文件： `:bp`

* 着色 

  > syntax:语法

  * 显示着色：`:syntax on`
  * 关闭显示：`:syntax off` 

* 加密文件

  * `:X`   （与保存并退出做区分 `:x`）

## 编辑模式

* 进入方式
  * 在光标所在字符前开始插入：`i`
  * 在光标所在字符后开始插入：`a`
* 退出方式
  * 按下 `esc`
* 计算器的使用
  * 按下 `ctrl + R` ,然后输入 `=` ，此时光标会变到最后一行；输入需要计算的内容，按下 `回车`

# vim的配置文件

* 三种方式配置
  * 末行模式下输入的配置（临时的）
  * 个人配置文件： `~/.vimrc`  如果没有可以自行新建
  * 全局配置文件：`/etc/vimrc`
* 在配置文件中配置:
  * 比如：显示行号：`set nu`

* 权重：个人配置>全局配置

# 异常退出

* 在编辑文件之后并没有正常的去保存退出，而是遇到突然关闭终端或者是断电的情况，则会显示下面的效果，这个情况称之为异常退出
  ![image-20201210190808406](C:\Users\傻兮兮乎乎\AppData\Roaming\Typora\typora-user-images\image-20201210190808406.png)

* 解决办法
  * 将交换文件（在编程过程中产生的临时文件）删除即可：`#rm -f .文件名.swp`

# 别名机制

* 别名映射文件：`~/.bashrc`
  ![image-20201210194712698](C:\Users\傻兮兮乎乎\AppData\Roaming\Typora\typora-user-images\image-20201210194712698.png)

* 如果想新创造的命令生效，必须要重新登录当前用户 `su 用户名`